<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.chart.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.*?>
<?import javafx.scene.text.*?>
<?import javafx.scene.effect.*?>
<?import javafx.scene.shape.*?>

<ScrollPane xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.ensah.qoe.Controller.QoSController"
            fitToWidth="true"
            hbarPolicy="NEVER"
            vbarPolicy="AS_NEEDED"
            style="-fx-background-color: transparent;">

    <VBox spacing="0" alignment="TOP_CENTER"
          style="-fx-background-color: linear-gradient(to bottom, #e8f4f8, #ffffff);">

        <!-- =============================== -->
        <!--              HEADER             -->
        <!-- =============================== -->
        <VBox spacing="12" alignment="CENTER"
              style="-fx-padding: 25 30 20 30;
                     -fx-background-color: linear-gradient(to right, #5c160c, rgba(231,90,23,0.9));
                     -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.15), 15, 0, 0, 5);">

            <HBox alignment="CENTER_LEFT" spacing="18">

                <!-- Titre + icÃ´ne (Ã  gauche) -->
                <HBox spacing="18" alignment="CENTER_LEFT">
                    <StackPane>
                        <Rectangle width="55" height="55" arcWidth="15" arcHeight="15"
                                   fill="linear-gradient(to bottom right, #ff6b35, #ff8c42)">
                            <effect>
                                <DropShadow color="rgba(255,107,53,0.5)" radius="12" spread="0.4"/>
                            </effect>
                        </Rectangle>
                        <Text text="ðŸ“Š" style="-fx-font-size: 28; -fx-fill: white;"/>
                    </StackPane>

                    <VBox spacing="3">
                        <Label text="QUALITÃ‰ DE SERVICE"
                               style="-fx-text-fill: white; -fx-font-weight: bold;
                          -fx-font-size: 28; -fx-font-family: 'Segoe UI';"/>

                    </VBox>
                </HBox>

                <!-- ESPACE FLEXIBLE -->
                <Region HBox.hgrow="ALWAYS"/>

                <!-- BOUTON IMPORT (Ã  droite) -->
                <Button fx:id="importButton"
                        text="ðŸ“ Importer CSV"
                        onAction="#importerCsv"
                        style="-fx-background-color: linear-gradient(to right, #ff6b35, #ff8c42);
                   -fx-text-fill: white;
                   -fx-font-size: 15;
                   -fx-font-weight: bold;
                   -fx-background-radius: 10;
                   -fx-padding: 10 30;
                   -fx-cursor: hand;"/>
            </HBox>

        </VBox>
        <!-- =============================== -->
        <!--            LINE CHART           -->
        <!-- =============================== -->
        <VBox spacing="15" alignment="CENTER"
              style="-fx-padding: 25;
                     -fx-background-radius: 12;
                     -fx-background-color: white;
                     -fx-border-color: #e5e7eb;
                     -fx-border-radius: 12;
                     -fx-border-width: 1;
                     -fx-max-width: 900;">
            <HBox spacing="10">
                <ComboBox fx:id="zoneCombo"
                          promptText="Choisir une zone"
                          onAction="#afficherInfosZone"
                          prefWidth="300"
                          style="-fx-background-radius: 10;"/>
                <Button text="ðŸ”„"
                        onAction="#rafraichirZones"
                        style="-fx-background-color:#3b82f6; -fx-text-fill:white; -fx-background-radius:10;"/>
            </HBox>

            <Label text="Ã‰volution des mÃ©triques QoS (par zone et tranche de 12h)"
                   style="-fx-text-fill: #1e3a8a; -fx-font-size: 18; -fx-font-weight: bold;"/>

            <LineChart fx:id="qosLineChart"
                       title="QoS Over Time"
                       prefHeight="350"
                       prefWidth="850">
                <xAxis>
                    <CategoryAxis label="Tranche 12h"/>
                </xAxis>
                <yAxis>
                    <NumberAxis label="Valeur"/>
                </yAxis>
            </LineChart>
        </VBox>

        <!-- =============================== -->
        <!--      ZONE + INDICATEURS         -->
        <!-- =============================== -->
        <VBox spacing="20"
              style="-fx-padding: 20 30 25 30;
                     -fx-max-width: 900;">

            <Label text="Informations QoS par Zone"
                   style="-fx-text-fill: #ff7232; -fx-font-weight: bold; -fx-font-size: 20;"/>

            <!-- ===== CARDS ===== -->
            <GridPane hgap="15" vgap="15">
                <columnConstraints>
                    <ColumnConstraints percentWidth="33"/>
                    <ColumnConstraints percentWidth="33"/>
                    <ColumnConstraints percentWidth="33"/>
                </columnConstraints>

                <!-- Latence -->
                <VBox spacing="8" alignment="CENTER_LEFT" GridPane.columnIndex="0" GridPane.rowIndex="0"
                      style="-fx-background-color: #fde68a; -fx-background-radius: 12; -fx-padding: 15;">
                    <Label text="â± Latence" style="-fx-font-weight: bold; -fx-text-fill: #92400e;"/>
                    <Label fx:id="latenceLabel" text="-" style="-fx-font-size: 22; -fx-text-fill: #d97706;"/>
                </VBox>

                <!-- Jitter -->
                <VBox spacing="8" alignment="CENTER_LEFT" GridPane.columnIndex="1" GridPane.rowIndex="0"
                      style="-fx-background-color: #a5f3fc; -fx-background-radius: 12; -fx-padding: 15;">
                    <Label text="ðŸŒŠ Jitter" style="-fx-font-weight: bold; -fx-text-fill: #164e63;"/>
                    <Label fx:id="jitterLabel" text="-" style="-fx-font-size: 22; -fx-text-fill: #0891b2;"/>
                </VBox>

                <!-- Perte -->
                <VBox spacing="8" alignment="CENTER_LEFT" GridPane.columnIndex="2" GridPane.rowIndex="0"
                      style="-fx-background-color: #fca5a5; -fx-background-radius: 12; -fx-padding: 15;">
                    <Label text="ðŸ“‰ Perte" style="-fx-font-weight: bold; -fx-text-fill: #7f1d1d;"/>
                    <Label fx:id="perteLabel" text="-" style="-fx-font-size: 22; -fx-text-fill: #dc2626;"/>
                </VBox>

                <!-- Signal -->
                <VBox spacing="8" alignment="CENTER_LEFT" GridPane.columnIndex="0" GridPane.rowIndex="1"
                      style="-fx-background-color: #c4b5fd; -fx-background-radius: 12; -fx-padding: 15;">
                    <Label text="ðŸ“¶ Signal" style="-fx-font-weight: bold; -fx-text-fill: #4c1d95;"/>
                    <Label fx:id="signalLabel" text="-" style="-fx-font-size: 22; -fx-text-fill: #7c3aed;"/>
                </VBox>

                <!-- MOS -->
                <VBox spacing="8" alignment="CENTER_LEFT" GridPane.columnIndex="1" GridPane.rowIndex="1"
                      style="-fx-background-color: #a7f3d0; -fx-background-radius: 12; -fx-padding: 15;">
                    <Label text="â­ MOS" style="-fx-font-weight: bold; -fx-text-fill: #047857;"/>
                    <Label fx:id="mosLabel" text="-" style="-fx-font-size: 22; -fx-text-fill: #059669;"/>
                </VBox>

                <!-- Bande passante -->
                <VBox spacing="8" alignment="CENTER_LEFT" GridPane.columnIndex="2" GridPane.rowIndex="1"
                      style="-fx-background-color: #93c5fd; -fx-background-radius: 12; -fx-padding: 15;">
                    <Label text="ðŸš€ Bande Passante" style="-fx-font-weight: bold; -fx-text-fill: #1e40af;"/>
                    <Label fx:id="bandePassanteLabel" text="-" style="-fx-font-size: 22; -fx-text-fill: #2563eb;"/>
                </VBox>
                <VBox spacing="8" alignment="CENTER_LEFT" GridPane.columnIndex="2" GridPane.rowIndex="1"
                      style="-fx-background-color: #93c5fd; -fx-background-radius: 12; -fx-padding: 15;">
                    <Label text="Tranche" style="-fx-font-weight: bold; -fx-text-fill: #1e40af;"/>
                    <Label fx:id="trancheLabel" text="-" style="-fx-font-size: 22; -fx-text-fill: #2563eb;"/>
                </VBox>
                <VBox spacing="8" alignment="CENTER_LEFT" GridPane.columnIndex="2" GridPane.rowIndex="1"
                      style="-fx-background-color: #93c5fd; -fx-background-radius: 12; -fx-padding: 15;">
                    <Label text="Ville" style="-fx-font-weight: bold; -fx-text-fill: #1e40af;"/>
                    <Label fx:id="villeLabel" text="-" style="-fx-font-size: 22; -fx-text-fill: #2563eb;"/>
                </VBox>
                <VBox spacing="8" alignment="CENTER_LEFT" GridPane.columnIndex="2" GridPane.rowIndex="1"
                      style="-fx-background-color: #93c5fd; -fx-background-radius: 12; -fx-padding: 15;">
                    <Label text="Pays" style="-fx-font-weight: bold; -fx-text-fill: #1e40af;"/>
                    <Label fx:id="paysLabel" text="-" style="-fx-font-size: 22; -fx-text-fill: #2563eb;"/>
                </VBox>
                <VBox spacing="8" alignment="CENTER_LEFT" GridPane.columnIndex="2" GridPane.rowIndex="1"
                      style="-fx-background-color: #93c5fd; -fx-background-radius: 12; -fx-padding: 15;">
                    <Label text="Mesures regroupÃ©s" style="-fx-font-weight: bold; -fx-text-fill: #1e40af;"/>
                    <Label fx:id="countLabel" text="-" style="-fx-font-size: 22; -fx-text-fill: #2563eb;"/>
                </VBox>

            </GridPane>

        </VBox>

        <!-- Footer -->
        <HBox alignment="CENTER" style="-fx-padding: 20;">
            <Label text="QoS Analysis System â€¢ v2.0 â€¢ Â© 2024"
                   style="-fx-text-fill: #9ca3af; -fx-font-size: 11;"/>
        </HBox>

    </VBox>
</ScrollPane>
