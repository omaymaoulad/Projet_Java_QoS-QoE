<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>
<?import javafx.scene.shape.*?>
<?import javafx.scene.effect.*?>

<ScrollPane xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.ensah.qoe.Controller.QoEController"
            fitToWidth="true"
            vbarPolicy="AS_NEEDED"
            style="-fx-background-color: transparent;">

    <VBox spacing="10" alignment="TOP_CENTER"
          style="-fx-background-color: linear-gradient(to bottom, #fff2f2, #ffffff);">

        <!-- ===================== HEADER ===================== -->
        <VBox spacing="12" alignment="CENTER"
              style="-fx-padding: 25 30 20 30;
                     -fx-background-color: linear-gradient(to right, #f59e0b, #d97706);
                     -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.15), 15, 0, 0, 5);">

            <HBox alignment="CENTER" spacing="18">

                <StackPane>
                    <Rectangle width="55" height="55" arcWidth="15" arcHeight="15"
                               fill="linear-gradient(to bottom right, #fbbf24, #f59e0b)">
                        <effect>
                            <DropShadow color="rgba(251,191,36,0.5)"
                                        radius="12" spread="0.4"/>
                        </effect>
                    </Rectangle>
                    <Text text="â­" style="-fx-font-size: 28; -fx-fill: white;"/>
                </StackPane>

                <VBox spacing="3">
                    <Label text="QUALITÃ‰ D'EXPÃ‰RIENCE"
                           style="-fx-text-fill: white; -fx-font-weight: bold;
                                  -fx-font-size: 28; -fx-font-family: 'Segoe UI';"/>

                    <Label text="Tableau de bord de l'expÃ©rience utilisateur"
                           style="-fx-text-fill: #fef3c7;
                                  -fx-font-size: 14; -fx-font-family: 'Segoe UI';"/>
                </VBox>
            </HBox>

        </VBox>


        <!-- ===================== IMPORT CSV ===================== -->
        <VBox spacing="10" alignment="CENTER" style="-fx-padding: 20 0 0 0;">
            <Button fx:id="importCsvButton" text="ðŸ“ Importer un fichier CSV"
                    onAction="#importerCsv"
                    style="-fx-background-color: linear-gradient(to right, #f59e0b, #d97706);
                           -fx-text-fill: white; -fx-font-size: 15; -fx-font-weight: bold;
                           -fx-background-radius: 12; -fx-padding: 12 40;"/>
            <Label text="SÃ©lectionnez un fichier CSV contenant les donnÃ©es QoE / Telco"
                   style="-fx-text-fill: #6b7280; -fx-font-style: italic;"/>
        </VBox>



        <!-- ===================== MODES D'ANALYSE ===================== -->
        <VBox spacing="14" alignment="CENTER">
            <Label text="Choisir le mode dâ€™analyse"
                   style="-fx-text-fill:#f59e0b; -fx-font-size:18; -fx-font-weight:bold;"/>

            <HBox spacing="20" alignment="CENTER">
                <RadioButton fx:id="radioClient" text="Par Client" onAction="#modeClient"/>
                <RadioButton fx:id="radioGenre"  text="Par Genre"  onAction="#modeGenre"/>
                <RadioButton fx:id="radioZone"   text="Par Zone"   onAction="#modeZone"/>
            </HBox>
        </VBox>



        <!-- ===================== SELECTIONS ===================== -->
        <HBox fx:id="clientSelectionBox" spacing="10" visible="false"
              style="-fx-padding: 10;">
            <Label text="Client :" style="-fx-font-weight:bold;"/>
            <ComboBox fx:id="clientCombo"/>
        </HBox>

        <HBox fx:id="genreSelectionBox" spacing="10" visible="false"
              style="-fx-padding: 10;">
            <Label text="Genre :" style="-fx-font-weight:bold;"/>
            <ComboBox fx:id="genreCombo"/>
        </HBox>

        <HBox fx:id="zoneSelectionBox" spacing="10" visible="false"
              style="-fx-padding: 10;">
            <Label text="Zone :" style="-fx-font-weight:bold;"/>
            <ComboBox fx:id="zoneCombo"/>
        </HBox>
        <!-- ===================== QoE GLOBAL ===================== -->
        <VBox spacing="5" alignment="CENTER"
              style="-fx-background-color: linear-gradient(to bottom right, #fef3c7, #fde68a);
                     -fx-background-radius: 12; -fx-padding: 20;
                     -fx-border-color: #fbbf24; -fx-border-radius: 12; -fx-border-width: 2;">

            <Label text="ðŸŽ¯ QoE GLOBAL"
                   style="-fx-text-fill: #92400e; -fx-font-weight: bold; -fx-font-size: 18;"/>

            <Label fx:id="overallQoeLabel" text="-"
                   style="-fx-text-fill: #d97706; -fx-font-weight: bold; -fx-font-size: 32;"/>
        </VBox>
        <!-- ===================== TABLE VIEW CLIENT ===================== -->
        <VBox fx:id="tableContainer" spacing="10" visible="false"
              style="-fx-min-height:300; -fx-background-color:white;
                     -fx-background-radius:10; -fx-padding:10;">

            <Label text="ðŸ“‹ Liste des clients"
                   style="-fx-font-size:16; -fx-text-fill:#374151; -fx-font-weight:bold;"/>

            <TableView fx:id="clientTable" />
        </VBox>
        <!-- ===================== GRAPH GENRE ===================== -->
        <VBox fx:id="graphContainer" spacing="10" visible="false"
              style="-fx-min-height:300; -fx-background-color:#f3f4f6;
                     -fx-background-radius:10; -fx-padding:10;">

            <Label text="ðŸ“Š Graphique QoE par Genre"
                   style="-fx-font-size:16; -fx-text-fill:#374151; -fx-font-weight:bold;"/>
        </VBox>
        <!-- ===================== ZONE VIEW ===================== -->
        <VBox fx:id="mapContainer" spacing="10" visible="false"
              style="-fx-min-height:300; -fx-background-color:#e5e7eb;
                     -fx-background-radius:10; -fx-padding:10;">

            <Label text="ðŸ—ºï¸ Zone sÃ©lectionnÃ©e"
                   style="-fx-font-size:16; -fx-text-fill:#374151; -fx-font-weight:bold;"/>
        </VBox>
        <!-- ===================== SUBJECTIF ===================== -->
        <VBox spacing="15" alignment="CENTER">

            <Label text="MÃ‰TRIQUES SUBJECTIVES"
                   style="-fx-text-fill: #f59e0b; -fx-font-size:18; -fx-font-weight:bold;"/>

            <GridPane hgap="15" vgap="15" style="-fx-padding: 10;">
                <columnConstraints>
                    <ColumnConstraints percentWidth="50"/>
                    <ColumnConstraints percentWidth="50"/>
                </columnConstraints>

                <VBox spacing="5" GridPane.rowIndex="0" GridPane.columnIndex="0"
                      style="-fx-background-color:#fff7d6; -fx-padding:15; -fx-background-radius:10;">
                    <Label text="ðŸ˜Š Satisfaction" style="-fx-font-weight:bold;"/>
                    <Label fx:id="satisfactionLabel" text="-" style="-fx-font-size:18;"/>
                </VBox>

                <VBox spacing="5" GridPane.rowIndex="0" GridPane.columnIndex="1"
                      style="-fx-background-color:#ffe3e3; -fx-padding:15; -fx-background-radius:10;">
                    <Label text="ðŸ“¹ QualitÃ© VidÃ©o" style="-fx-font-weight:bold;"/>
                    <Label fx:id="videoQualityLabel" text="-" style="-fx-font-size:18;"/>
                </VBox>

                <VBox spacing="5" GridPane.rowIndex="1" GridPane.columnIndex="0"
                      style="-fx-background-color:#eee9ff; -fx-padding:15; -fx-background-radius:10;">
                    <Label text="ðŸŽµ QualitÃ© Audio" style="-fx-font-weight:bold;"/>
                    <Label fx:id="audioQualityLabel" text="-" style="-fx-font-size:18;"/>
                </VBox>

                <VBox spacing="5" GridPane.rowIndex="1" GridPane.columnIndex="1"
                      style="-fx-background-color:#e2f0ff; -fx-padding:15; -fx-background-radius:10;">
                    <Label text="âš¡ InteractivitÃ©" style="-fx-font-weight:bold;"/>
                    <Label fx:id="interactivityLabel" text="-" style="-fx-font-size:18;"/>
                </VBox>

                <VBox spacing="5" GridPane.rowIndex="2" GridPane.columnIndex="0"
                      style="-fx-background-color:#d7ffee; -fx-padding:15; -fx-background-radius:10;">
                    <Label text="ðŸ›¡ï¸ FiabilitÃ©" style="-fx-font-weight:bold;"/>
                    <Label fx:id="reliabilityLabel" text="-" style="-fx-font-size:18;"/>
                </VBox>

            </GridPane>

        </VBox>
        <!-- ===================== OBJECTIF ===================== -->
        <VBox spacing="15" alignment="CENTER">

            <Label text="MÃ‰TRIQUES OBJECTIVES"
                   style="-fx-text-fill: #f59e0b; -fx-font-size:18; -fx-font-weight:bold;"/>

            <GridPane hgap="20" vgap="15">
                <columnConstraints>
                    <ColumnConstraints percentWidth="33"/>
                    <ColumnConstraints percentWidth="33"/>
                    <ColumnConstraints percentWidth="33"/>
                </columnConstraints>

                <VBox spacing="5" GridPane.columnIndex="0">
                    <Label text="â³ Buffering"/>
                    <Label fx:id="bufferingLabel" text="-" style="-fx-font-size:16;"/>
                </VBox>

                <VBox spacing="5" GridPane.columnIndex="1">
                    <Label text="â±ï¸ Loading Time"/>
                    <Label fx:id="loadingTimeLabel" text="-" style="-fx-font-size:16;"/>
                </VBox>

                <VBox spacing="5" GridPane.columnIndex="2">
                    <Label text="âŒ Failure Rate"/>
                    <Label fx:id="failureRateLabel" text="-" style="-fx-font-size:16;"/>
                </VBox>

                <HBox alignment="CENTER_LEFT" spacing="10"
                      GridPane.rowIndex="1" GridPane.columnIndex="0" GridPane.columnSpan="3">
                    <Label text="ðŸ“¶ Streaming Quality" style="-fx-font-weight: bold;"/>
                    <Label fx:id="streamingQualityLabel" text="-" style="-fx-text-fill: #555;"/>
                </HBox>
            </GridPane>

        </VBox>
        <!-- ===================== FOOTER ===================== -->
        <HBox alignment="CENTER" style="-fx-padding: 20 0 10 0;">
            <Label text="QoE Analysis System â€¢ Quality of Experience â€¢ v2.0 â€¢ Â© 2024"
                   style="-fx-text-fill: #9ca3af; -fx-font-size: 11;"/>
        </HBox>

    </VBox>
</ScrollPane>